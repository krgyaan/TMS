<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Guarantee Undertaking</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Times New Roman', serif;
            font-size: 12pt;
            line-height: 1.6;
            color: #000;
            padding: 20mm 15mm;
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #000;
            padding-bottom: 15px;
        }
        .header h1 {
            font-size: 18pt;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .content {
            margin: 20px 0;
        }
        .section {
            margin-bottom: 20px;
        }
        .section-title {
            font-weight: bold;
            font-size: 13pt;
            margin-bottom: 10px;
            text-decoration: underline;
        }
        .undertaking-text {
            text-align: justify;
            margin: 15px 0;
            line-height: 1.8;
        }
        .signature-section {
            margin-top: 50px;
            display: flex;
            justify-content: space-between;
        }
        .signature-box {
            width: 45%;
            border-top: 1px solid #000;
            padding-top: 10px;
            text-align: center;
        }
        .signature-label {
            font-weight: bold;
            margin-top: 5px;
        }
        .footer {
            margin-top: 30px;
            font-size: 10pt;
            text-align: center;
            color: #666;
        }
        @media print {
            body {
                padding: 0;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>UNDERTAKING FOR BANK GUARANTEE</h1>
    </div>

    <div class="content">
        <div class="section">
            <p class="undertaking-text">
                I/We hereby undertake to indemnify and keep indemnified the bank against all losses, damages, costs, charges, and expenses that the bank may incur or sustain by reason of or in connection with the Bank Guarantee issued in favor of <strong>{{instrument.favouring}}</strong> for an amount of <strong>{{formatCurrency instrument.amount}}</strong>.
            </p>
        </div>

        <div class="section">
            <div class="section-title">Bank Guarantee Details</div>
            <p><strong>Amount:</strong> {{formatCurrency instrument.amount}}</p>
            <p><strong>Favouring:</strong> {{instrument.favouring}}</p>
            {{#if tender}}
            <p><strong>Tender No:</strong> {{tender.tenderNo}}</p>
            {{#if tender.tenderName}}
            <p><strong>Project Name:</strong> {{tender.tenderName}}</p>
            {{/if}}
            {{/if}}
        </div>

        <div class="section">
            <p class="undertaking-text">
                I/We further undertake to pay to the bank on demand all amounts that may become due and payable by the bank under the said Bank Guarantee, together with interest, costs, charges, and expenses.
            </p>
        </div>

        <div class="section">
            <p class="undertaking-text">
                This undertaking shall remain in full force and effect until the Bank Guarantee is discharged or cancelled, and all amounts due to the bank are fully paid.
            </p>
        </div>
    </div>

    <div class="signature-section">
        <div class="signature-box">
            <div class="signature-label">Authorized Signatory</div>
            {{#if user}}
            <div style="margin-top: 40px;">{{user.name}}</div>
            {{/if}}
            <div style="margin-top: 10px;">Date: {{formatDate generatedAt}}</div>
        </div>
        <div class="signature-box">
            <div class="signature-label">Witness</div>
            <div style="margin-top: 40px;">_________________</div>
            <div style="margin-top: 10px;">Date: _______________</div>
        </div>
    </div>

    <div class="footer">
        <p>Generated on {{formatDateTime generatedAt}}</p>
    </div>
</body>
</html>
